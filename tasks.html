---
title: "Task Tracker"
layout: public
permalink: /tasks/
---

<script src='https://code.jquery.com/jquery-3.3.1.min.js'></script>
<h2>Task Tracker</h2>

<table>
  <thead>
    <tr>
      <th>#</th>
      <th>Task</th>
      <th>Monster</th>
      <th>Amount</th>
      <th>Area</th>
    </tr>
  </thead>
  <tbody id="tbody">

  </tbody>
</table>


<script>
function loadJson(file) {
	$.getJSON(file, createTable);
}
function getElem(e) {
	return document.getElementById(e);
}
function createTable(json) {
  var tbody = getElem("tbody");

  var style = "text-align: right";

	var result = "{\n";
  for (var i = Object.keys(json).length; i > 0; i--) {

		var task = json[i-1];

		/* Task rework
		if (task["coords"]) {
			var coords = task["coords"].split(';');

			task.coords = [];
			for (var j = 0; j < coords.length; j+=2){
				var pos0 = coords[j].split(',');
				var pos1 = coords[j+1].split(',');
				var x = Number(pos0[0]);
				var y = Number(pos0[1]);
				var w = pos1[0]-x;
				var h = pos1[1]-y;
				task.coords.push({x:x,y:y,w:w,h:h});
			}
		}
		result+="\t\""+(i-1)+"\":"+JSON.stringify(task)+",\n";
		//*/

    var row = document.createElement("tr");

    var tdi = document.createElement("td");
    tdi.style = style;
    var a = document.createElement("a");
    a.href = "/task/?id=" + i;
    a.innerHTML = i;
    tdi.appendChild(a);
    row.appendChild(tdi);

    var tdtask = document.createElement("td");
    tdtask.setAttribute("nowrap","nowrap");
    tdtask.innerHTML = task.task;
    row.appendChild(tdtask);

    var tdmonster = document.createElement("td");
    tdmonster.setAttribute("nowrap","nowrap");
    tdmonster.innerHTML = task.monster;
    row.appendChild(tdmonster);

    var tdamount = document.createElement("td");
    tdamount.style = style;
    tdamount.innerHTML = task.amount;
    row.appendChild(tdamount);

    var tdarea = document.createElement("td");
    tdarea.setAttribute("nowrap","nowrap");
    tdarea.innerHTML = task.area;
    row.appendChild(tdarea);

    tbody.appendChild(row);
  }
	console.log(result+"}");
}
loadJson("/_data/tasks.json");

</script>
